<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">
<meta name="google-site-verification" content="4cR7WuQWEtkbu8ThfxGkT1vACiVi5Q_8ykfkRudOnTU" />

<link rel="shortcut icon" href="/images/logo.png">

<link rel="stylesheet" type="text/css" href="/css/common.css">
<script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    // google code prettifyの有効化
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      // ページの一番上までスクロールさせます。
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

<script type="text/javascript" language="javascript">
    var vc_pid = "886663612";
</script><script type="text/javascript" src="//aml.valuecommerce.com/vcdal.js" async></script>

<title> Time :: Piece --A new way to handle dates and times  - Perl Zemi|Perl Installation, Perl Tutorial, Many Examples</title>
<meta name="description" content="Starting with Perl 5.10, a module called Time :: Piece has been added to the standard module to handle time conveniently. If you're using Perl 5.10 or higher, the Time :: Piece module is useful if you want to work with dates and times.">
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@perlzemi" />
<meta name="twitter:title" content=" Time :: Piece --A new way to handle dates and times  - Perl Zemi|Perl Installation, Perl Tutorial, Many Examples" />
<meta name="twitter:description" content="Starting with Perl 5.10, a module called Time :: Piece has been added to the standard module to handle time conveniently. If you're using Perl 5.10 or higher, the Time :: Piece module is useful if you want to work with dates and times." />
<meta name="twitter:image" content="https://en.perlzemi.com//images/twitter_card_large_kaeru.png" />


  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header_main">
  <h1>
    <a href="/"><img src="/images/logo.png">Perl Zemi</a>
  </h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    
  </div>
  <div class="middle">
    <ol class = "bread" itemscope itemtype = "http://schema.org/BreadcrumbList">
  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">
    <a itemprop="item" href="/">
        <span itemprop = "name"> Perl </ span> </a>
    <meta itemprop = "position" content = "1" />
  </ li>
  & # 8250;
  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">
    <a itemprop="item" href="/blog/20091116124667.html">
      <span itemprop = "name"> Module </ span> </a>
    <meta itemprop = "position" content = "2" />
  </ li>
  & # 8250;
  <li>
    here
  </ li>
</ ol>
<h2><a href="/blog/20091105124627.html"> Time :: Piece --A new way to handle dates and times </a></ h2>
<p>
  Starting with Perl 5.10, a module called Time :: Piece has been added to the standard module to handle time conveniently. If you're using Perl 5.10 or higher, the Time :: Piece module is useful if you want to work with dates and times.
</p>
<div style="width:calc(100% - 30px);margin:10px auto;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
       crossorigin="anonymous"></script>
  <!-- 最初の段落下 - ディスプレイ 横長 レスポンシブ -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4525414114581084"
       data-ad-slot="2828858335"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


<p>
  In traditional Perl, standard modules didn't have an intuitive way to handle dates and times. It took a little tedious work to handle dates and times. Time :: Piece provides intuitive manipulation of dates and times. It also has a date / time formatting function and an analysis function.
</p>
<p>
  Perl has a module called DateTime, which is essentially the standard for date-handling modules. However, this module must be installed from CPAN, not the standard module. Also, since it is a huge module, it takes a lot of time to load the module. You may be a little dissatisfied with the execution speed except in an environment where modules can be expanded in memory such as mod_perl.
</p>
<p>
  Think of Time :: Piece as a fast, lightweight module with some functionality.
</p>
<p>
  For general information on dates and times, please refer to the following.
</p>
<ul>
  <li>
    <a href="/blog/20161123147990.html"> Handling dates and times in Perl </a>
  </ li>
</ ul>
<h3> Acquisition of time / date information </ h3>
<p>
  Use the Time :: Piece module as follows: When used, the Time :: Piece module overwrites the core localtime and gmtime.
</p>
<pre>
use Time :: Piece;

Get # Time :: Piece object
my $ t = localtime;

# Get date and time information
my $ year = $ t-&gt; year;
my $ month = $ t-&gt; mon;
my $ mday = $ t-&gt; mday;

my $ hour = $ t-&gt; hour;
my $ minute = $ t-&gt; minute;
my $ second = $ t-&gt; sec;
&lt;/ pre&gt;

You can get the Time :: Piece object by calling localtime, and you can get the date and time information from now on.

The case where the time information is acquired by the standard function localtime is described for comparison.

&lt;pre&gt;
# When time information is acquired by localtime of standard function
my ($ second, $ minute, $ hour, $ mday, $ month, $ year) = localtime;

#Month starts from 0, so add 1
$ month + = 1;

# Year is obtained by subtracting 1900, so add 1900
$ year + = 1900;
&lt;/ pre&gt;

It is more intuitive to use localtime of Time :: Piece to handle date and time information.

&lt;h3&gt; List of information that can be obtained with Time :: Piece &lt;/ h3&gt;

A list of information that can be obtained with Time :: Piece.

&lt;table&gt;
  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; year
    &lt;/ td&gt;
    &lt;td&gt;
       Year
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; _ year
    &lt;/ td&gt;
    &lt;td&gt;
       Year-1900 (same as localtime for standard function) = "aaa"
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; yy
    &lt;/ td&gt;
    &lt;td&gt;
       Last two digits of the year
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; mon
    &lt;/ td&gt;
    &lt;td&gt;
       Month (starting from 1)
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; _mon
    &lt;/ td&gt;
    &lt;td&gt;
       Month (starting at 0, same as the standard function localtime)
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; monname
    &lt;/ td&gt;
    &lt;td&gt;
       Abbreviated name of month (Feb, etc.)
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; month
    &lt;/ td&gt;
    &lt;td&gt;
       Same as $ t-&gt; monname
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; fullmonth
    &lt;/ td&gt;
    &lt;td&gt;
       Month name (February, etc.)
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; mday
    &lt;/ td&gt;
    &lt;td&gt;
       Day
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; day_of_month
    &lt;/ td&gt;
    &lt;td&gt;
       Same as $ t-&gt; mday
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; hour
    &lt;/ td&gt;
    &lt;td&gt;
       24 hour
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; min
    &lt;/ td&gt;
    &lt;td&gt;
       Minutes
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; minute
    &lt;/ td&gt;
    &lt;td&gt;
       Same as $ t-&gt; min
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; sec
    &lt;/ td&gt;
    &lt;td&gt;
       Seconds
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; second
    &lt;/ td&gt;
    &lt;td&gt;
       Same as $ t-&gt; sec
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; wday
    &lt;/ td&gt;
    &lt;td&gt;
       Week number (1 is Sunday)
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; _wday
    &lt;/ td&gt;
    &lt;td&gt;
       Week number (0 is Sunday)
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; day_of_week
    &lt;/ td&gt;
    &lt;td&gt;
       $ t-&gt; _wday
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; wdayname
    &lt;/ td&gt;
    &lt;td&gt;
       Weekly abbreviation (Tue, etc.)
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; day
    &lt;/ td&gt;
    &lt;td&gt;
       $ t-&gt; wdayname
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; fullday
    &lt;/ td&gt;
    &lt;td&gt;
       Week name (Tuesday, etc.)
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; yday
    &lt;/ td&gt;
    &lt;td&gt;
       How many days in the year
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; day_of_year
    &lt;/ td&gt;
    &lt;td&gt;
       Same as $ t-&gt; yday
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; isdst
    &lt;/ td&gt;
    &lt;td&gt;
       Whether it is daylight saving time
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; daylight_savings
    &lt;/ td&gt;
    &lt;td&gt;
       Same as $ t-&gt; isdst
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; epoch
    &lt;/ td&gt;
    &lt;td&gt;
       Seconds from epoch
    &lt;/ td&gt;
  &lt;/ tr&gt;

&lt;/ table&gt;

&lt;h3&gt; Judgment of date &lt;/ h3&gt;

You can use Time :: Piece to determine if it is a leap year and if it is the last day of the month.

&lt;pre&gt;
# Is it a leap year?
$ t-&gt; is_leap_year

# Get the last day of the month (return the number 28-31)
$ t-&gt; month_last_day
&lt;/ pre&gt;

&lt;h3&gt; Format date / time &lt;/ h3&gt;

You may want to format the date / time and output it. Time :: Piece provides several fixed formats. You can also format it freely using the strftime method.

&lt;h4&gt; [A] Formats provided by default &lt;/ h4&gt;

The formats provided by default are as follows.&lt;table&gt;
  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; hms
    &lt;/ td&gt;
    &lt;td&gt;
       12:34:56
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; hms (".")
    &lt;/ td&gt;
    &lt;td&gt;
       12.34.56
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; time
    &lt;/ td&gt;
    &lt;td&gt;
       Same as $ t-&gt; hms
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; ymd
    &lt;/ td&gt;
    &lt;td&gt;
       2000-02-29
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; date
    &lt;/ td&gt;
    &lt;td&gt;
       Same as $ t-&gt; ymd
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; mdy
    &lt;/ td&gt;
    &lt;td&gt;
       02-29-2000
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; mdy ("/")
    &lt;/ td&gt;
    &lt;td&gt;
       02/29/2000
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; dmy
    &lt;/ td&gt;
    &lt;td&gt;
       29-02-2000
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; dmy (".")
    &lt;/ td&gt;
    &lt;td&gt;
       29.02.2000
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; datetime
    &lt;/ td&gt;
    &lt;td&gt;
       2000-02-29T12: 34: 56 (ISO 8601)
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      $ t-&gt; cdate
    &lt;/ td&gt;
    &lt;td&gt;
       Tue Feb 29 12:34:56 2000
    &lt;/ td&gt;
  &lt;/ tr&gt;

  &lt;tr&gt;
    &lt;td&gt;
      "$ t"
    &lt;/ td&gt;
    &lt;td&gt;
       Same as $ t-&gt; cdate
    &lt;/ td&gt;
  &lt;/ tr&gt;

&lt;/ table&gt;

&lt;h4&gt; [B] Format customization &lt;/ h4&gt;

If you want to customize the format freely, use the strftime method. Specify the time representation in $ format.

&lt;pre&gt;
$ t-&gt; strftime ($ format)
&lt;/ pre&gt;

This is a sample format of date and time.

&lt;pre&gt;
$ t-&gt; strftime ('% Y-% m-% d% H:% M:% S'); # 2009-11-34 12:14:15
&lt;/ pre&gt;

A list of formats that can be used with strftime.

&lt;pre&gt;
% a: Abbreviated name of the day of the week
% A: Day of the week name
% b: month abbreviation
% B: Month name
% c: Default format
% C: First two digits of the year
% d: days (01 to 31)
% D: Same as% m /% d /% y. Month day year
% e: day (1 to 31)
% F: Same as% Y-% m-% d (for example, 2008-11-31)
% G: 4 digits per year. If the year and week of ISO 8608 format is the previous year or the next year, that year.
% g: Last two digits of the year. If the year and week of ISO 8608 format is the previous year or the next year, that year.
% h: Same as% b. Month abbreviation
% H: Hour (00 to 23)
% I: Hour (01 to 12) Time in 12-hour notation
% j: What day is it for the first time from the beginning of the year? (001 to 366)
% k: Hour (0 to 23) The second digit of the one-digit number (0 to 9) is a space.
% l: Hour (1 to 12) Time in 12-hour notation The second digit of the one-digit number (0 to 9) is a space.
% m: Month number (01-12)
% M: Minutes (00 to 59)
% n: Newline character
% N: Milliseconds (Write% 3N displays milliseconds in 3 digits,% 6N displays milliseconds in 6 digits)
% p: am or pm
% P: AM or PM
Same as% r:% I:% M:% S% p. (11:55:23 PM etc.)
% R: hour and minute (for example, 15:16)
% s: Seconds from epoch
% S: seconds (00 to 61)
% t: tab character
Same as% T:% H:% M:% S. Hours, minutes and seconds (such as 23:14:03)
% u: Day of the week number (1 to 7. Monday is 1)
% U: How many weeks from the beginning of the year? Count the first Sunday of the year (00-53) as the beginning of the week. The first Sunday week is 01. The week before that was 00.
% V: How many weeks from the beginning of the year? (01-53) A week with at least 4 days is the first week of the year. Count Monday as the beginning of the week. Year and week in ISO 8608 format.
% w: Day of the week number (0 to 6. Sunday is 0)
% W: Weeks counting from the beginning of the year (00 to 53) Count the first Monday of the year as the beginning of the week. The first Monday week is 01. The week before that was 00.
% x: Default format for dates
% X: Default format for time
% y: last two digits of the year
% Y: year
% z: Time zone time shift from UTC (Coordinated Universal Time))
% Z: Timezone name
%%:%
&lt;/ pre&gt;

&lt;h4&gt; Precautions when handling Japanese &lt;/ h4&gt;

Note that Time :: Piece's strftime method always returns a byte string, whether the input is a byte string or an internal string.

&lt;pre&gt;
# Byte string is always returned
my $ bytes = $ tp-&gt; strftime ("% Y year% m month");
&lt;/ pre&gt;

&lt;h3&gt; Parse the character string that expresses the date / time &lt;/ h3&gt;

You can parse date and time representations to create Time :: Piece objects. Use the strptime method to parse dates and times.

&lt;pre&gt;
my $ t = Time :: Piece-&gt; strptime (character string representing date / time, format);
&lt;/ pre&gt;

As a sample, let's parse the MySQL date representation and create a Time :: Piece object. Use the above strftime format for the format.

&lt;pre&gt;
my $ datetime_mysql = '2009-12-31 23:59:59';
my $ t = Time :: Piece-&gt; strptime ($ datetime_mysql,'% Y-% m-% d% H:% M:% S');
&lt;/ pre&gt;

&lt;h3&gt; Localization &lt;/ h3&gt;

By default, month and week names are in English. If you want to get the Japanese week name, pass an array of day names to the method to get the week name.

&lt;pre&gt;
my @week_names = ('Sun','Mon','Tue','Wed','Thu','Fri','Sat');
my $ t = Time :: Piece :: localtime;
# Get week name in Japanese
my $ wday = $ t-&gt; wdayname (@week_names);
&lt;/ pre&gt;

&lt;h3&gt; Calculation of date / time information &lt;/ h3&gt;

&lt;h4&gt; Tempe :: Piece object subtraction &lt;/ h4&gt;

Time :: Piece can also calculate dates and times. If you subtract between Time :: Piece objects, the return value will be a Time :: Seconds object. This object is in seconds when evaluated as a string.

&lt;pre&gt;
my $ sec = $ t2- $ t1;
&lt;/ pre&gt;

You can also convert Time :: Soconds objects to days and years.

&lt;pre&gt;
$ sec-&gt; seconds;
$ sec-&gt; minutes;
$ sec-&gt; hours;
$ sec-&gt; days;
$ sec-&gt; weeks;
$ sec-&gt; months;

# 30 days
$ sec-&gt; financial_months;
&lt;/ pre&gt;

The conversion to days and years is done according to the following rules. One day is converted to 24 hours. One week is converted to 7 days. One year is converted to 365.24225 days. One year is converted to 12 months.

&lt;h4&gt; Addition of Time :: Piece objects &lt;/ h4&gt;

Time :: Piece objects cannot be added to each other. You can add seconds or a Time :: Seconds object to the Timpe :: Piece object.

&lt;pre&gt;
$ t + 533;
$ t + Time :: Seconds-&gt; new (300);
&lt;/ pre&gt;

Time :: Seconds also provides constants that can be added to the Time :: Piece object.

&lt;pre&gt;
ONE_DAY
ONE_WEEK
ONE_HOUR
ONE_MINUTE
ONE_MONTH
ONE_YEAR
ONE_FINANCIAL_MONTH
LEAP_YEAR
NON_LEAP_YEAR
&lt;/ pre&gt;

To add 5 days: The Time :: Seconds module must be loaded to take advantage of these constants.

&lt;pre&gt;
use Time :: Seconds;
$ t + ONE_DAY * 5
&lt;/ pre&gt;

&lt;h3&gt; Date comparison &lt;/ h3&gt;

You can use comparison operators to compare dates. You can use "&lt;", "&gt;", "&lt;=", "&gt; =", "&lt;=&gt;", "==" and "! =".

&lt;pre&gt;
$ t1 &lt;$ t2
&lt;/ pre&gt;

&lt;h3&gt; Create Time :: Piece object &lt;/ h3&gt;

As far as I read the document, it seems that there is no choice but to use the strptime method to create a Time :: Piece object at any date and time.

&lt;pre&gt;
my $ t = Time :: Piece-&gt; strptime ('2009-12-31 23:59:59','% Y-% m-% d% H:% M:% S');
&lt;/ pre&gt;

(When I read the source code, there is a parse method, but when I tried it, it seems to be broken ... It seems that it is private because it is not in the document.)

&lt;h3&gt; Get an object that represents today's date &lt;/ h3&gt;

To use the &lt;strong&gt; Time :: Piece &lt;/ strong&gt; module to get an object that represents today:

&lt;pre&gt;
use Time :: Piece;

my $ today = today ();

sub today {
  # Today (YYYY-mm-dd HH: MM: SS)
  my $ today_

  </div>
  <div class="bottom">
    <h3>Related Informatrion</h3>

<div style="margin:10px 10px;">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="9163995495"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

  </div>
</div>

        </div>
        <div class="side">
          <div class="side_list">
  <div class="side_list_body">
    <ul>
      <li>
        <div class="side_list_image">
        </div>
      </li>
    </ul>
  </div>
</div>

        </div>
      </div>
      <div class="footer">
        <div class="perlri_link">
  <a rel="nofollow" href="javascript:void(0)">Perl Club</a>
</div>

      </div>
    </div>
  </body>
</html>
