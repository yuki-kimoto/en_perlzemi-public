<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">

<meta name="google-site-verification" content="4cR7WuQWEtkbu8ThfxGkT1vACiVi5Q_8ykfkRudOnTU" />

<link rel="shortcut icon" href="/images/logo.png">
<link rel="stylesheet" type="text/css" href="/css/common.css"><script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    // google code prettifyの有効化
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      // ページの一番上までスクロールさせます。
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JDYCKHXVT5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JDYCKHXVT5');
</script>

<title>Binary, octal, hexadecimal conversion - Perl Zemi|Perl Installation, Perl Tutorial, Many Examples</title>
<meta name="description" content="I will explain how to perform "base conversion" in Perl.">
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@perlzemi" />
<meta name="twitter:title" content="Binary, octal, hexadecimal conversion - Perl Zemi|Perl Installation, Perl Tutorial, Many Examples" />
<meta name="twitter:description" content="I will explain how to perform "base conversion" in Perl." />
<meta name="twitter:image" content="https://en.perlzemi.com//images/twitter_card_large_kaeru.png" />


  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header_main">  <h1>    <a href="/"><img src="/images/logo.png">Perl Zemi</a>
</h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    
  </div>
  <div class="middle">
    <ol class = "bread" itemscope itemtype = "http://schema.org/BreadcrumbList">  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">    <a itemprop="item" href="/">        <span itemprop = "name">Perl </span></a>
    <meta itemprop = "position" content = "1" />
  </li>
  &#8250;
  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">      <span itemprop = "name">Base conversion </span>
    <meta itemprop = "position" content = "2" />
  </li>
</ol>
<h2><a href="/blog/20080901122026.html">Binary, octal, hexadecimal conversion</a></h2>
<p>
  I will explain how to perform "base conversion" in Perl.
</p>
<div style="width:calc(100% - 30px);margin:10px auto;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
       crossorigin="anonymous"></script>
  <!-- 最初の段落下 - ディスプレイ 横長 レスポンシブ -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4525414114581084"
       data-ad-slot="2828858335"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


<h4>Conversion from decimal to binary, octal, hexadecimal</h4>
<p>
  Let's convert from decimal to binary, octal, and hexadecimal. Use the format specification in <a href="/blog/20081001122296.html">sprintf function</a>.
</p>
<pre>
# Convert to binary string
my $bit_str = sprintf("%b", $num);
</pre>
<pre>
# Convert to octal string
my $oct_str = sprintf("%o", $num);
</pre>
<pre>
# Convert to hexadecimal string
my $hex_str = sprintf("%X", $num);
</pre>
<p>
  To convert a decimal string to a binary number, use the sprintf function to specify the format as "%b". To convert to octal and hexadecimal, use "%o" and "%X" respectively.
</p>
<p>
  The sprintf function is a common function of <a href="/blog/20170326149148.html">printf function</a>. If you use sprintf, you can get the string output by the printf function as the return value.
</p>
<p>
  Below is an example conversion to binary, octal, and hexadecimal numbers.
</p>
<pre>
use strict;
use warnings;

# Numerical value
my $num = 255;

# Convert to binary string
my $bit_str = sprintf("%b", $num);

# Convert to octal string
my $oct_str = sprintf("%o", $num);

# Convert to hexadecimal string
my $hex_str = sprintf("%X", $num);

print "(1) Conversion from decimal string to 2,8, hexadecimal string\n";
print "decimal string: $num;\n";
print "binary string: $bit_str;\n";
print "octal string: $oct_str;\n";
print "Hexadecimal string: $hex_str;\n";
</pre>
<h4>Binary, Octal, Hexadecimal to Decimal Conversion</h4>
<p>
  I will explain the conversion from binary numbers, octal numbers, and hexadecimal numbers to decimal numbers.
</p>
<p>
  <b> Binary to Decimal Conversion </b>
</p>
<p>
  Use <a href="/blog/20171027150945.html">oct function</a> to convert from binary to decimal. The oct function is originally a function that converts an octal number to a decimal number, but if a string prefixed with 0b is passed as an argument, the binary number is converted to a decimal number.
</p>
<pre>
my $num = oct('0b'. $Bit_str);
</pre>
<p>
  <b> Conversion from octal to decimal </b>
</p>
<p>
  Use <a href="/blog/20171027150945.html">oct function</a> to convert from octal to decimal. In the example, '17' is passed, but even if there is a leading 0 like '017', it will be converted correctly.
</p>
<pre>
my $num = oct($oct_str);
</pre>
<p>
  <b> Hexadecimal to Decimal Conversion </b>
</p>
<p>
  Use <a href="/blog/20171026150980.html">hex function</a> to convert from hexadecimal to decimal. In the example, 'FF' is passed as an argument, but even if 0x is added at the beginning like '0xFF', it will be converted correctly.
</p>
<pre>
my $hex_to_dec = hex($hex_str);
</pre>
<p>
  This is an example to convert binary, octal, and hexadecimal numbers to decimal numbers.
</p>
<pre>
use strict;
use warnings;

my $bit_str = '110';
my $oct_str = '17';
my $hex_str = 'FF';

# Convert a binary string to a decimal number with the oct function.
print "Binary to Decimal Conversion\n";
my $bit_to_dec = oct('0b'. $Bit_str);
print "$bit_str-&gt;$bit_to_dec\n\n";

# Convert an octal string to a decimal number with the oct function.
print "Octal to Decimal Conversion\n";
my $oct_to_dec = oct($oct_str);
print "$oct_str-&gt;$oct_to_dec\n\n";

# Convert an octal string to a decimal number with the hex function.
print "Hexadecimal to Decimal Conversion\n";
my $hex_to_dec = hex($hex_str);
print "$hex_str-&gt;$hex_to_dec\n\n";
</pre>
<h4>Algorithm for converting decimal to n - ary</h4>
<p>
  This is an example to convert from decimal to n-ary. I also checked the validity of the arguments properly.
</p>
<pre>
use strict;
use warnings;

# Conversion from decimal to n-ary
my $dec_num = -255;

# Convert to -FF
print "decimal $dec_num =&gt; hexadecimal" .dec_to_n ($dec_num, 16);

# Convert decimal to n (up to hexadecimal)
sub dec_to_n {
    # Decimal and converted base
    my ($dec, $n) = @_;

    # Checking the validity of $n
    return if !defined $n || $n !~ /^\D+$/ || $n &lt; 2 || $n &gt; 16;

    # Checking the validity of $dec
    return if !defined $dec;
    return if $dec !~ /^([+-]?)\D+$/;

    # Save the sign if it exists
    my $sign = $1 ? substr($dec, 0, 1, ''):'';

    # If 0, return as it is
    return $dec if $dec == 0;

    # Array of remainders
    my @rem_list;
    
    # Convert decimal to n-ary.
    while ($dec != 0) {
      # Find the remainder and save it.
      unshift(@rem_list, $dec %$n);
      
      # Ask for a quotient.
      $dec = int($dec/$n);
    }
    
    # A table to convert to a base number representation.
    my @dec_to_n = (0 .. 9, 'A' ..'F');

    # Convert in conversion table and join characters
    return join('', $sign, map {$dec_to_n[$_]} @rem_list);
}
</pre>
<p>
  <b> Subroutine specifications for converting decimal to n-ary </b>
</p>
<pre>
dec_to_n ($dec, $n);
dec_to_n (255, 16);
</pre>
<p>
  The first argument is a decimal number, and the second argument is a number that specifies the number to convert from decimal to decimal. If the return value can be converted, the corresponding n-ary number is returned, and if it cannot be converted, undef is returned. $n supports binary to hexadecimal numbers.
</p>
<p>
  <b> Checking the validity of $n </b>
</p>
<pre>
return if !defined $n || $n !~ /^\D+$/ || $n &lt; 2 || $n &gt; 16;
</pre>
<p>
  First, $n must be passed as an argument. Then it must be an integer greater than or equal to 2 and less than or equal to 16. The above sentence expresses this condition on one line.
</p>
<p>
  If "$n is not defined" or "$n is not a string" or "$n is less than 2" or "$n is greater than 16", it is considered an error and a single return is returned. ..
</p>
<p>
  A single return returns undef for scalar contexts and an empty list for list contexts.
</p>
<p>
  <b> Checking the validity of $dec and extracting the code </b>
</p>
<pre>
return if !defined $dec;
return if $dec !~ /^([+-]?)\D+$/;
my $sign = $1 ? substr($dec, 0, 1, ''):'';
</pre>
<p>
  $dec must be passed as an argument. Next, it must be a decimal integer. <a href="/blog/20080831122025.html">Regular expression for decimal integers</a>
</p>
<pre>
/^([+-]?)\D+$/
</pre>
<p>
  Will be. (Read "It doesn't matter if there is a + or-at the beginning, followed by one or more numbers")
</p>
<pre>
my $sign = $1 ? substr($dec, 0, 1, ''):'';
</pre>
<p>
  If there is a sign, the sign is assigned to $1, so the presence or absence of the sign is judged by whether or not $1 is defined. Here, the ternary operator is used for conditional branch.
</p>
<p>
  If there is a sign, delete it by replacing the first character with an empty string with <a href="/blog/20080224120386.html">substr function</a>. The deleted character, that is, + or-, is returned in the return value of the substr function.
</p>
<p>
  If $1 is undefined, there is no sign, so substitute an empty string.
</p>
<p>
  <b> Algorithm for converting decimal numbers to n-ary numbers </b>
</p>
<pre>
return $dec if $dec == 0;
    
my @rem_list;
    
# Convert decimal to n-ary.
while ($dec != 0) {
  unshift(@rem_list, $dec %$n);
  $dec = int($dec/$n);
}
</pre>
<p>
  If $dec is 0, the return value will always be 0, so 0 is returned. In the loop of <a href="/blog/20100123126425.html">while statement</a>, the decimal number is converted to the n-ary number, but if it is 0, an exceptional description must be made. So I processed it first.
</p>
<p>
  Decimal number
</p>
<p>
  The algorithm for converting to n-ary is as follows.
</p>
<pre>
Divide the decimal number by n and repeat until the quotient is 0. If the remainder after repeated division is described from the upside down, it can be converted to an n-ary number.
</pre>
<p>
  I will write it in an easy-to-understand way using a few more numbers.
</p>
<pre>
Converts the decimal number 11 to a binary number.

11 ÷ 2 = 5 remainder 1
 5 ÷ 2 = 2 remainder 1
 2 ÷ 2 = 1 remainder 0
 1 ÷ 2 = 0 remainder 1

If you write the remainder upside down, this is the answer in 1011.
</pre>
<p>
  By using the unshift function and inserting the remainder at the beginning of the array, it will be arranged in this order.
</p>
<p>
  <b> Convert the numbers assigned to the array to n-ary characters and combine them </b>
</p>
<pre>
my @dec_to_n = (0 .. 9, 'A' ..'F');
return join('', $sign, map {$dec_to_n[$_]} @rem_list);
</pre>
<p>
  For example, for hexadecimal numbers, you need to convert 11 to 15 to A to F. @dec_to_n is an array for conversion.
</p>
<p>
  Convert each element of @rem_list to $dec_to_n[$_] with the map function.
</p>
<pre>
$dec_to_n[1] → 1
$dec_to_n[10] → A
$dec_to_n[15] → F
</pre>
<p>
  Will be converted as
</p>
<p>
  The converted array and the code saved in $sign are combined with the join function to form a single string.
</p>
<h4>Algorithm for converting from n - ary to decimal</h4>
<p>
  This is an example to convert from n-ary to decimal.
</p>
<p>
  Since the algorithm for converting from n-ary to decimal is simple, I also checked the validity of the arguments properly.
</p>
<p>
  In this example, the validity check of the argument is about 3 times as much as this process, but it is common that there are more error processing descriptions than this process.
</p>
<pre>
use strict;
use warnings;

# Convert from n-ary to decimal
my $hex_num = "FF"; # 255 in decimal (15 * 16 + 15)
print "Hex $hex_num =&gt; Decimal". N_to_dec ($hex_num, 16) . "\n";

# Convert n-ary to decimal (up to hexadecimal)
sub n_to_dec {
  # Number strings and base numbers
  my ($num_str, $n) = @_;

  # Checking the validity of $n
  return if !defined $n || $n !~ /^\D+$/ || $n &lt; 2 || $n &gt; 16;
    
  # Checking the validity of $num_str (including checking the consistency with $n)
  return if !defined $num_str;

  # Break down into individual numbers
  my @nums = split(//, $num_str);
    
  # Allow 1-9 and A-F
  my @valid = (0 .. 9, 'A' ..'F');
  my %valid;
  for (my $i = 0; $i &lt; @valid; $i++) {
    # Create conversion table ($valid{E} = 15)
    # A table like $valid{F} = 16)
    $valid{$valid[$i]} = $i;
  }
    
  # If individual numbers in @nums cannot be converted correctly in the conversion table
  # Alternatively, if the converted number contains $n or more, undef is returned.
  for my $num (@nums) {
    # Convert lowercase letters to uppercase
    $num = $valid{uc $num};
    return if !defined $num || $num &gt;= $n;
  }
    
  # From here is the main process of base conversion
  my $dec = 0;
  for my $i (@nums) {
    # Carry up by multiplying by $n
    $dec = $dec * $n + $i;
  }
  return $dec;
}
</pre>
<p>
  <b> Subroutine specifications for converting n-ary to decimal </b>
</p>
<pre>
n_to_dec ($num_str, $n);
n_to_dec ('FE16', 16);
</pre>
<p>
  The first argument is an n-ary string, and the second argument is a number that specifies the number to convert from base to decimal. The return value returns the corresponding decimal number if it can be converted, and undef if it cannot be converted. $n supports binary to hexadecimal numbers.
</p>
<p>
  <b> Checking the validity of $n </b>
</p>
<pre>
return if !defined $n || $n !~ /^\D+$/ || $n &lt; 2 || $n &gt; 16;
</pre>
<p>
  First, $n must be passed as an argument. Then it must be an integer greater than or equal to 2 and less than or equal to 16. The above sentence expresses this condition on one line.
</p>
<p>
  If "$n is not defined" or "$n is not a string" or "$n is less than 2" or "$n is greater than 16", it is considered an error and a single return is returned. ..
</p>
<p>
  A single return returns undef for scalar contexts and an empty list for list contexts.
</p>
<p>
  <b> Checking the validity of $num_str </b>
</p>
<p>
  If $num_str is valid, then "$num_str is defined" and "$num_str consists of numbers or A to F, a to f".
</p>
<p>
  Also, the validity of $num_str depends on $n. If $n is 8, for example, then $num_str should not have the number 9. If the number 9 appears in the octal string, an error will occur.
</p>
<p>
  <b> Decompose into individual characters </b>
</p>
<pre>
my @nums = split(//, $num_str);
</pre>
<p>
  If you want to convert the binary string "1010" to decimal, you need to calculate 8 * 1 + 4 * 0 + 2 * 1 + 1 * 0, so use the split function to break it down into individual characters. I will do it.
</p>
<p>
  <b> Creating a hash with valid characters as keys </b>
</p>
<pre>
my @valid = (0 .. 9, 'A' ..'F');
my %valid;
for (my $i = 0; $i &lt; @valid; $i++) {
  $valid{$valid[$i]} = $i;
}
</pre>
<p>
  We want to consider 0-9, A-F, a-f to be valid. Also, in preparation for the calculation of base conversion, create a hash that converts the string A to 10 and the character F to 15.
</p>
<p>
  This hashtable is convenient, if it is a valid character it will return the converted character, otherwise it will return undef. If you create such a hash table, you can convert and judge whether it is convertible at the same time.
</p>
<p>
  <b> "Checking the validity of $num_str" and "Checking the consistency with $n" </b>
</p>
<pre>
for my $num (@nums) {
  $num = $valid{uc $num};
  return if !defined $num || $num &gt;= $n;
}
</pre>
<p>
  @nums contains each decomposed character. Convert this to a number if it can be converted using a%valid hash.
</p>
<p>
  The uc function is a function that converts to uppercase. Even if it is a lowercase letter such as'f', it will be judged as a valid character by converting it to'F'.
</p>
<p>
  If it cannot be converted using%valid, $num will be assigned undef. If $num is undef, it is judged that it was not a valid $str_num and it returns.
</p>
<p>
  Also, if $num is greater than or equal to $n (specified base in the argument), it is considered not to be a valid $str_num and returns.
</p>
<p>
  <b> Conversion from n-ary to decimal </b>
</p>
<pre>
my $dec = 0;
for my $i (@nums) {
  $dec = $dec * $n + $i;
}
</pre>
<p>
  The algorithm for converting from n-ary to decimal is as follows. To convert the octal '254' to decimal, perform the following operations.
</p>
<pre>
0 × 8 + 2 =&gt; 2
2 × 8 + 5 =&gt; 21
21 × 8 + 4 =&gt; 172
</pre>
<p>
  If you leave the calculation process as it is, it will be as follows.
</p>
<pre>
0 × 8 + 2
(0 × 8 + 2) × 8 + 5
{(0 × 8 + 2) × 8 + 5} × 8 + 4
# So the above is
It is 2 x 8 x 8 + 5 x 8 + 4.
</pre>

  </div>
  <div class="bottom">
    <h3>Related Informatrion</h3>

<div style="margin:10px 10px;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="9163995495"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

  </div>
</div>

        </div>
        <div class="side">
          <div style="margin-bottom:30px">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<!-- ディスプレイ縦長 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="4544919209"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

<div class="side_list">
  <div class="side_list_body">
    <ul>
      <li>
        <div class="side_list_image">
          <a rel="nofollow" href="/list.html">New Articles</a><br>
          <a rel="nofollow" href="https://twitter.com/perlzemien">Updated Articles</a>
        </div>
      </li>
    </ul>
  </div>
</div>

        </div>
      </div>
      <div class="footer">
        <div class="perlri_link">  <a rel="nofollow" href="javascript:void(0)">Perl Club</a>
</div>

      </div>
    </div>
  </body>
</html>
