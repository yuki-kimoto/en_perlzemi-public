<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">

<meta name="google-site-verification" content="4cR7WuQWEtkbu8ThfxGkT1vACiVi5Q_8ykfkRudOnTU" />

<link rel="shortcut icon" href="/images/logo.png">
<link rel="stylesheet" type="text/css" href="/css/common.css"><script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    // google code prettifyの有効化
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      // ページの一番上までスクロールさせます。
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JDYCKHXVT5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JDYCKHXVT5');
</script>

<title>Introduction to Object Oriented - Perl Zemi|Perl Installation, Perl Tutorial, Many Examples</title>
<meta name="description" content="Many people find it difficult to do object-oriented programming in Perl, and don't intuitively know how to create classes or define instance variable.">
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@perlzemi" />
<meta name="twitter:title" content="Introduction to Object Oriented - Perl Zemi|Perl Installation, Perl Tutorial, Many Examples" />
<meta name="twitter:description" content="Many people find it difficult to do object-oriented programming in Perl, and don't intuitively know how to create classes or define instance variable." />
<meta name="twitter:image" content="https://en.perlzemi.com//images/twitter_card_large_kaeru.png" />


  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header_main">  <h1>    <a href="/"><img src="/images/logo.png">Perl Zemi</a>
</h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    
  </div>
  <div class="middle">
    <ol class = "bread" itemscope itemtype = "http://schema.org/BreadcrumbList">  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">    <a itemprop="item" href="/">        <span itemprop = "name">Perl </span></a>
    <meta itemprop = "position" content = "1" />
  </li>
  &#8250;
  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">    <a itemprop="item" href="/blog/20161030147778.html">        <span itemprop = "name">Object Oriented </span></a>
    <meta itemprop = "position" content = "2" />
  </li>
  &#8250;
  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">      <span itemprop = "name">Introduction </span>
    <meta itemprop = "position" content = "3" />
  </li>
</ol>
<h2><a href="/blog/20130305136248.html">Introduction to Object Oriented</a></h2>
<p>
  Many people find it difficult to do object-oriented programming in Perl, and don't intuitively know how to create classes or define instance variable.
</p>
<div style="width:calc(100% - 30px);margin:10px auto;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
       crossorigin="anonymous"></script>
  <!-- 最初の段落下 - ディスプレイ 横長 レスポンシブ -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4525414114581084"
       data-ad-slot="2828858335"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


<p>
  In fact, with the help of modules, Perl's object orientation is very straightforward. This time, I will explain Perl's object orientation using a module called Object::Simple.
</p>
<h3>Install Object::Simple</h3>
<p>
  Install Object::Simple. You can easily install modules using cpan.
</p>
<pre>
cpan Object::Simple
</pre>
<p>
  Now you are ready to go.
</p>
<h3>Class definition</h3>
<p>
  In Perl, classes are defined using <strong> package </strong>. First, use the <b> -base </b> flag to create a class that inherits from Object::Simple. Remember the following description as a spell first.
</p>
<pre>
package MyClass;
use Object::Simple -base;
</pre>
<h3>Constructor</h3>
<p>
  This way you can define a class called <b> MyClass </b>. You can create an object from a class using the constructor <b> new </b>. (This new is inherited from Object::Simple.)
</p>
<pre>
my $obj = MyClass-&gt;new;
</pre>
<p>
  The <b> new </b> method can receive a hash or a hash reference.
</p>
    
<pre>
my $obj = MyClass-&gt;new(foo =&gt; 1, bar =&gt; 2);
my $obj = MyClass-&gt;new({foo =&gt; 1, bar =&gt; 2});
</pre>
<p>
  This is set as an attribute value.
</p>
<h3>Accessor</h3>
<p>
  Next, let's define an accessor. An accessor is a method for accessing an attribute value (instance variable). You can access the attribute values by defining an accessor.
</p>
<p>
  Use the <b> has </b> function to generate an accessor.
</p>
<pre>
has'foo';
</pre>
<p>
  You can access the attribute values by defining an accessor.
</p>
<pre>
# Value setting
$obj-&gt;foo(1);

# Get value
my $foo = $obj-&gt;foo;
</pre>
<p>
  You can also specify defaults for attribute values.
</p>
<pre>
has foo =&gt; 1;
</pre>
<p>
  When the accessor is first called if the attribute value is not set
</p>
<p>
  The default value is set to the attribute value.
</p>
<pre>
# Get the default value of 1
my $default = $obj-&gt;foo;
</pre>
<p>
  If you want to specify a reference or object as the default value, it must be the return value of the subroutine reference.
</p>
<pre>
has foo =&gt; sub {[]};
has foo =&gt; sub {{}};
has foo =&gt; sub {MyClass-&gt;new};
</pre>
<p>
  You can also generate multiple accessors at once.
</p>
<pre>
has [qw/foo bar baz /];
has [qw/foo bar baz /] =&gt; 0;
</pre>
<h3>Inheritance</h3>
<p>
  Use <b> -base </b> for inheritance. Let's create a <b> SubClass </b> that inherits from <b> MyClass </b>.
</p>
<pre>
package MyClass;
use Object::Simple -base;
</pre>
<pre>
package SubClass;
use MyClass -base;
</pre>
<h3>Superclass method call</h3>
<p>
  You can use <b> SUPER </b> to call superclass methods.
</p>
<pre>
package SubClass;
use MyClass -base;

sub clear {
  my $self = shift;
  
  $self-&gt;SUPER::clear;
}
</pre>
<h3>Constructor override</h3>
<p>
  You may want to override the constructor in a subclass. To override the constructor:
</p>
<pre>
package MyClass;
use Object::Simple -base;

sub new {
  my $class = shift;
  
  my $self = $class-&gt;SUPER::new(@_);
  
  return $self;
}
</pre>
<p>
  Since new is a constructor, be sure to return the object itself.
</p>
<h3>Creating a class - Practice</h3>
<p>
  Oh mysteriously, Perl's object-oriented programming is almost master if you remember this much. Then, it is a practical edition. Let's create a <b> Point </b> class and a <b> Point3D </b> class.
</p>
<h4>Point class</h4>
<blockquote>
<ul>
  <li>
    Point is a class that represents a point.
  </li>
  <li>
    It has accessors x and y.
  </li>
  <li>
    It has a method called clear that clears the values of x and y to 0.
  </li>
</blockquote>
</ul>
<pre>
package Point;
use Object::Simple -base;

has x =&gt; 0;
has y =&gt; 0;

sub clear {
  my $self = shift;
  
  $self-&gt;x(0);
  $self-&gt;y(0);
}

1;
</pre>
<p>
  (The "1;" at the end is due to the rule that the file that writes the module must end with true.)
</p>
<p>
  The Point class can be used as follows.
</p>
<pre>
use Point;
my $point = Point-&gt;new(x =&gt; 3, y =&gt; 5);
print $point-&gt;x;
$point-&gt;y(9);
$point-&gt;clear;
</pre>
<h4>Point3D class</h4>
<blockquote>
<ul>
  <li>
    Point3D is a class that represents a three-dimensional point.
  </li>
  <li>
    It has accessors x, y, z.
  </li>
  <li>
    It has a method called clear that clears the values of x, y, z to 0.
  </li>
</blockquote>
</ul>
<p>
  <b> Point3D </b> is created by inheriting <b> Point </b>. The <b> clear </b> method has been overridden to clear the values of <b> x </b>, <b> y </b> and <b> z </b>.
</p>
    
<pre>
package Point3D;
use Point -base;

has z =&gt; 0;

sub clear {
  my $self = shift;
  
  $self-&gt;SUPER::clear;
  
  $self-&gt;z(0);
}

1;
</pre>
<p>
  The Point3D class can be used as follows.
</p>
<pre>
use Point3D;
my $point = Point-&gt;new(x =&gt; 3, y =&gt; 5, z =&gt; 8);
print $point-&gt;z;
$point-&gt;z(9);
$point-&gt;clear;
</pre>
<h3>Executable example</h3>
<p>
  I'll write an example that can be executed.
</p>
<h4>lib/Point.pm</h4>
<p>
  Create a directory called lib and create a file called Point.pm in it.
</p>
<pre>
package Point;
use Object::Simple -base;

has x =&gt; 0;
has y =&gt; 0;

sub clear {
  my $self = shift;
  
  $self-&gt;x(0);
  $self-&gt;y(0);
}

1;
</pre>
<h4>lib/Point3D.pm</h4>
<p>
  Create a file called Point3D.pm in a directory called lib.
</p>
<pre>
package Point3D;
use Point -base;

has z =&gt; 0;

sub clear {
  my $self = shift;
  
  $self-&gt;SUPER::clear;
  
  $self-&gt;z(0);
}

1;
</pre>
<h4>test.pl</h4>
<p>
  This is an example to read and use the class. You can add a module search path by using the lib module.
</p>
<pre>
use strict;
use warnings;
use lib 'lib';
use Point3D;

my $point = Point3D-&gt;new(x =&gt; 3, y =&gt; 5, z =&gt; 8);

# 8 is displayed
print $point-&gt;z . "\n";

$point-&gt;z(9);

# 9 is displayed
print $point-&gt;z . "\n";
$point-&gt;clear;

# 0 is displayed
print $point-&gt;z . "\n";
</pre>
<h4>Script execution</h4>
<p>
  The directory structure is as follows.
</p>
<pre>
test.pl
lib - Point.pm
    - Point3D.pm
</pre>
<p>
  Please execute as follows.
</p>
<pre>
perl test.pl
</pre>
<h3>Object - oriented programming concept</h3>
<h4>Inheritance</h4>
<p>
  To better understand Object::Simple, I would like to explain object-oriented concepts.
</p>
<p>
  The first object-oriented concept is "inheritance". "Inheritance" means "if class Q inherits from class P, then class Q can call all the methods of class P".
</p>
<pre>
+ - - +
| P | Superclass
+ - - + Define method1 and method2
  |
+ - - +
| Q | Subclass
+ - - + Define method3
</pre>
<p>
  Since class Q inherits from class P, class Q can call all the methods of class P in addition to the methods of class Q. In other words, class Q can call method1, method2 and method3.
</p>
<pre>
package P;
use Object::Simple -base;

sub method1 {...}
sub method2 {...}
</pre>
<pre>
package Q;
use P -base;

sub method3 {...}
</pre>
<p>
  Perl has useful functions and methods to help with object-oriented programming. To find out which class an object belongs to, use the ref function.
</p>
<pre>
my $class = ref $obj;
</pre>
<p>
  To find out if an object inherits a particular class, use the isa method.
</p>
<pre>
$obj-&gt;isa('MyClass');
</pre>
<p>
  Use the can method to find out if an object (or class) can call a particular method.
</p>
<pre>
MyClass-&gt;can('method1');
$obj-&gt;can('method1');
</pre>
<h4>Encapsulation</h4>
<p>
  The second concept of object-oriented programming is encapsulation. "Encapsulation" means "no direct access to data internally". You must use the published methods described in the documentation. By following this rule, everything will be simple.
</p>
<p>
  In order to follow this rule, it is necessary to generate an accessor to get and set the value.
</p>
<pre>
my $value = $obj-&gt;foo;
$obj-&gt;foo(1);
</pre>
  Accessing data directly is a bad habit.
<pre>
# Not good
my $value = $obj-&gt;{foo};
$obj-&gt;{foo} = 1;
</pre>
<h4>Polymorphism</h4>
<p>
  The third concept of object-oriented programming is "polymorphism".
</p>
<p>
  "Polymorphism" becomes two concepts of "overload" and "override"
</p>
<p>
  It will be split.
</p>
<p>
  Perl programmers don't have to worry about overloading. Perl is a dynamic language, so subroutine can accept any value. Overloading is required for languages with static types such as C ++ and Java.
</p>
<p>
  "Override" means "in a subclass, you can change the methods of the base class".
</p>
<pre>
package P;
use Object::Simple -base;

sub method1 {return 1}
</pre>
<pre>
package Q;
use P -base;

sub method1 {return 2}
</pre>
<p>
  Method1 of class P returns a value of 1. Method1 of class Q returns a value of 2. In other words, in class Q, method1 has been overridden.
</p>
<pre>
# Returns 1
my $obj_p = P-&gt;new;
$obj_p-&gt;method1;

# Returns 2
my $obj_q = Q-&gt;new;
$obj_q-&gt;method1; # Return value is 2
</pre>
<p>
  If you want to call a method of the base class from a subclass, use the SUPER pseudo-class.
</p>
<pre>
package Q;
use Object::Simple -base;

sub method1 {
  my $self = shift;
  
  # Call method1 of P using the SUPER pseudo-class
  my $value = $self-&gt;SUPER::method1 (@_);
  
  return 2 + $value;
}
</pre>
<p>
  new can be overridden. For example, if you want to initialize the object, override new.
</p>
<pre>
sub new {
  my $self = shift-&gt;SUPER::new(@_);
  
  # Initialization process
  
  return $self;
}
</pre>
<p>
  If you want to change the argument of new, you can solve it by overriding new.
</p>
    
<pre>
sub new {
  my $self = shift;
  
  $self-&gt;SUPER::new(x =&gt; $_[0], y =&gt; $_[1]);
  
  return $self;
}
</pre>
<p>
  Understanding these three concepts, "inheritance, " "encapsulation, " and "polymorphism, " will create a powerful enough object-oriented program and make the source code readable by users in other languages.
</p>
<h3>Package block syntax</h3>
<p>
  In Perl 5.14, a package block syntax has been added that allows you to write the following, eliminating the need to write a "1;" at the end of the file. If you are using Perl 5.14 or higher, you may want to try it.
</p>
<pre>
package Point {
  use Object::Simple -base;

  has x =&gt; 0;
  has y =&gt; 0;

  sub clear {
    my $self = shift;
    
    $self-&gt;x(0);
    $self-&gt;y(0);
  }
}
</pre>
<h3>Summary</h3>
<p>
  Perl is a flexible language. You can be completely object-oriented in the language Perl. Perl's object-orientation is sometimes ridiculed as a retrofit implementation, but it's functionally object-oriented and complete.
</p>
<p>
  Perl has a namespace and is object-oriented, so it can withstand large-scale development. As the scale grows, I think it's a good idea to program in an object-oriented way.
</p>

  </div>
  <div class="bottom">
    <h3>Related Informatrion</h3>

<div style="margin:10px 10px;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="9163995495"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

  </div>
</div>

        </div>
        <div class="side">
          <div style="margin-bottom:30px">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<!-- ディスプレイ縦長 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="4544919209"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

<div class="side_list">
  <div class="side_list_body">
    <ul>
      <li>
        <div class="side_list_image">
          <a rel="nofollow" href="/list.html">New Articles</a><br>
          <a rel="nofollow" href="https://twitter.com/perlzemien">Updated Articles</a>
        </div>
      </li>
    </ul>
  </div>
</div>

        </div>
      </div>
      <div class="footer">
        <div class="perlri_link">
  <a rel="nofollow" href="https://perlclub.net/en">Perl Club</a>
</div>

      </div>
    </div>
  </body>
</html>
