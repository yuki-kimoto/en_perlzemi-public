<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">

<meta name="google-site-verification" content="4cR7WuQWEtkbu8ThfxGkT1vACiVi5Q_8ykfkRudOnTU" />

<link rel="shortcut icon" href="/images/logo.png">
<link rel="stylesheet" type="text/css" href="/css/common.css"><script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    // google code prettifyの有効化
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      // ページの一番上までスクロールさせます。
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-JDYCKHXVT5"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-JDYCKHXVT5');
</script>

<title>Benchmark - Benchmark (performance comparison) - Perl Zemi|Perl Installation, Perl Tutorial, Many Examples</title>
<meta name="description" content="The  Benchmark  module allows you to benchmark (performance comparison).">
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@perlzemi" />
<meta name="twitter:title" content="Benchmark - Benchmark (performance comparison) - Perl Zemi|Perl Installation, Perl Tutorial, Many Examples" />
<meta name="twitter:description" content="The  Benchmark  module allows you to benchmark (performance comparison)." />
<meta name="twitter:image" content="https://en.perlzemi.com//images/twitter_card_large_kaeru.png" />


  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header_main">  <h1>    <a href="/"><img src="/images/logo.png">Perl Zemi</a>
</h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    
  </div>
  <div class="middle">
    <ol class = "bread" itemscope itemtype = "http://schema.org/BreadcrumbList">  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">    <a itemprop="item" href="/">        <span itemprop = "name">Perl </span></a>
    <meta itemprop = "position" content = "1" />
  </li>
  &#8250;
  <li itemprop = "itemListElement" itemscope itemtype = "http://schema.org/ListItem">    <a itemprop="item" href="/blog/20091116124667.html">      <span itemprop = "name">Module </span></a>
    <meta itemprop = "position" content = "2" />
  </li>
  &#8250;
  <li>
    here
  </li>
</ol>
<h2><a href="/blog/20100509127696.html">Benchmark - Benchmark (performance comparison)</a></h2>
<p>
  The <strong> Benchmark </strong> module allows you to benchmark (performance comparison).
</p>
<div style="width:calc(100% - 30px);margin:10px auto;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
       crossorigin="anonymous"></script>
  <!-- 最初の段落下 - ディスプレイ 横長 レスポンシブ -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4525414114581084"
       data-ad-slot="2828858335"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


<pre>
# Loading modules and importing functions
use Benchmark qw/timethese cmpthese/;
</pre>
<p>
  You can get the performance information of each function by executing the <strong> timethese </strong> function. If you specify this as an argument to the <strong> compthese </strong> function, the standard output will display the comparison result.
</p>
<pre>
# Performance comparison
my $result = timethese ($count, {
  name1 =&gt; sub {
    # Process you want to execute 1
  },
  name2 =&gt; sub {
    # Process you want to execute 2
  },
  name3 =&gt; sub {
    # Process you want to execute 3
  },
});

cmpthese $result;
</pre>
<p>
  This is an example for benchmarking. It is necessary to increase the number of executions to some extent to improve accuracy. This example has been run 10000 times.
</p>
<pre>
# Benchmark example
my $result = timethese (10000, {
  loop1 =&gt; sub {
    my $i = 0;
    while ($i &lt; 1500) {
      $i++;
    }
  },
  loop2 =&gt; sub {
    my $i = 0;
    while ($i &lt; 1000) {
      $i++;
    }
  },
  loop3 =&gt; sub {
    my $i = 0;
    while ($i &lt; 500) {
      $i++;
    }
  },
});

cmpthese $result;
</pre>
<p>
  The output result is as follows. It can be confirmed that loop3 is nearly 3 times faster than loop1.
</p>
<pre>
# Benchmark output result
Benchmark: timing 10000 iterations of loop1, loop2, loop3 ...
     loop1: 4 wallclock secs (2.98 usr + 0.00 sys = 2.98 CPU) @3351.21/s (n = 10000)
     loop2: 2 wallclock secs (1.75 usr + 0.00 sys = 1.75 CPU) @5714.29/s (n = 10000)
     loop3: 1 wallclock secs (1.03 usr + 0.00 sys = 1.03 CPU) @9699.32/s (n = 10000)
        Rate loop1 loop2 loop3
loop1 3351/s - - 41% -65%
loop2 5714/s 71% - - 41%
loop3 9699/s 189% 70% -
</pre>
<h3>FAQ about Benchmark module</h3>
<p>
  Q. Does the Benchmark module calculate the actual processing time?
</p>
<p>
  A. The time displayed by wallclock is the actual time taken. The value after @is calculated as "number of trials/CPU time".
</p>
<p>
  The value after @is calculated by the formula "number of trials/CPU time". CPU time is the time of the CPU used by the process, so it does not include I/O waits such as database access or time to execute child processes. Also, when <a href="/blog/20170522149546.html">sleep function</a> is executed, it is not included in the execution time because it does not use the CPU.
</p>
<p>
  This means that the value after @cannot be used as a reference when benchmarking I/O or calling child processes. The value compared by cmpthese is also "number of trials/CPU time", so the displayed value cannot be used for evaluation as it is.
</p>
<p>
  If you are doing I/O or running a child process, you need to look at the value displayed on the wallclock. However, in most cases, you will use the Benchmark module for the purpose of evaluating the algorithm of the program, so you can use the value compared by cmpthese as a guide.
</p>

  </div>
  <div class="bottom">
    <h3>Related Informatrion</h3>

<div style="margin:10px 10px;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="9163995495"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

  </div>
</div>

        </div>
        <div class="side">
          <div style="margin-bottom:30px">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<!-- ディスプレイ縦長 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="4544919209"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

<div class="side_list">
  <div class="side_list_body">
    <ul>
      <li>
        <div class="side_list_image">
          <a rel="nofollow" href="/list.html">New Articles</a><br>
          <a rel="nofollow" href="https://twitter.com/perlzemien">Updated Articles</a>
        </div>
      </li>
    </ul>
  </div>
</div>

        </div>
      </div>
      <div class="footer">
        <div class="perlri_link">
  <a rel="nofollow" href="https://perlclub.net/en">Perl Club</a>
</div>

      </div>
    </div>
  </body>
</html>
