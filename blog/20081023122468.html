<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1.0,minimum-scale=1.0">

<meta name="google-site-verification" content="4cR7WuQWEtkbu8ThfxGkT1vACiVi5Q_8ykfkRudOnTU" />

<link rel="shortcut icon" href="/images/logo.png">
<link rel="stylesheet" type="text/css" href="/css/common.css"><script type="text/javascript" src="/js/jquery-1.9.0.min.js"></script>
<script type="text/javascript" src="/js/google-code-prettify/prettify.js"></script>
<link  type="text/css" rel="stylesheet" href="/js/google-code-prettify/prettify.css"/>
<script>
  $(function(){
    $("pre").addClass("prettyprint");
    function init(event){
      prettyPrint();
    }
    if(window.addEventListener)window.addEventListener("load",init,false);
    else if(window.attachEvent)window.attachEvent("onload",init);
    
    $(".to-top").click(function() {
      $('body, html').animate({scrollTop: 0}, 300, 'linear');;
    });
  });
</script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HVBGQBWKJ2"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-HVBGQBWKJ2');
</script>

<title>Extract a record containing a specific time from the log - Perl ABC - Perl Installation, Perl Tutorial, Many Examples</title>
<meta name="description" content="This is an example to extract a record containing a specific time.">
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:site" content="@perlzemi" />
<meta name="twitter:title" content="Extract a record containing a specific time from the log - Perl ABC - Perl Installation, Perl Tutorial, Many Examples" />
<meta name="twitter:description" content="This is an example to extract a record containing a specific time." />
<meta name="twitter:image" content="https://en.perlzemi.com//images/twitter_card_large_kaeru.png" />


  </head>
  <body>
    <div class="container">
      <div class="header">
        <div class="header_main">
  <h1><a href="/"><img src="/images/logo.png">Perl ABC</a></h1>
</div>

      </div>
      <div class="main">
        <div class="content">
          <div class="entry">
  <div class="top">
    
  </div>
  <div class="middle">
    <h2><a href="/blog/20081023122468.html">Extract a record containing a specific time from the log</a></h2>
<p>
  This is an example to extract a record containing a specific time.
</p>
<div style="width:calc(100% - 30px);margin:10px auto;">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
       crossorigin="anonymous"></script>
  <!-- 最初の段落下 - ディスプレイ 横長 レスポンシブ -->
  <ins class="adsbygoogle"
       style="display:block"
       data-ad-client="ca-pub-4525414114581084"
       data-ad-slot="2828858335"
       data-ad-format="auto"
       data-full-width-responsive="true"></ins>
  <script>
       (adsbygoogle = window.adsbygoogle || []).push({});
  </script>
</div>


<pre>
use strict;
use warnings;

print "(1) Extract a record containing a specific range of time.\n";
my @records = (
  '1 7:00:00 aaa',
  '2 8:00:00 iii',
  '3 9:00:00 uuu',
  '4 10:00:00 eee',
  '5 11:00:00 ooo',
);

my $start_time = '08:00:00';

# This time is not included
my $end_time = '11:00:00';

for my $record(@records) {
  
  # Extract the time
  if ($record =~ /(\d{1,2}): (\d{2}) :(\d{2})/) {
    # You can compare as a string by matching the format.
    # '7: 00:00'-&gt;'07:00:00'
    my $time = sprintf("%02s:%02s:%02s", $1, $2, $3);
    
    # Extract the records included from the start time to the end time.
    if ($time ge $start_time &amp;&amp; $time lt $end_time) {
      print $record . "\n";
    }
  }
}
</pre>
<p>
  Output
</p>
<pre>
(1) Extract a record that includes a specific range of time.
2 8:00:00 iii
3 9:00:00 uuu
4 10:00:00 eee
</pre>
<h3>Explanation</h3>
<h4>Adjust the time format</h4>
<p>
  Use the sprintf function to format the time. By adjusting the length of the string to the same length, it is possible to compare with the string.
</p>
<pre>
if ($record =~ /(\d{1,2}): (\d{2}) :(\d{2})/) {
  my $time = sprintf("%02s:%02s:%02s", $1, $2, $3);
  
  if ($time ge $start_time &amp;&amp; $time lt $end_time) {
    print $record . "\n";
  }
}
</pre>
<h4>Extract the records included from the start time to the end time</h4>
<p>
  ge and lt are operators that compare which comes first in the dictionary order of strings. ge is an abbreviation for greater than or equel and lt is an abbreviation for lower than.
</p>
<pre>
if ($time ge $start_time &amp;&amp; $time lt $end_time) {
  print $record . "\n";
}
</pre>
<hr>
<p>
  <a href="/blog/20080229122347.html">Perl Reverse Dictionary/To Date and Time</a>
</p>

  </div>
  <div class="bottom">
    <h3>Related Informatrion</h3>

<div style="margin:10px 10px;"><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<ins class="adsbygoogle"
     style="display:block"
     data-ad-format="autorelaxed"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="9163995495"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

  </div>
</div>

        </div>
        <div class="side">
          <div style="margin-bottom:30px">
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-4525414114581084"
     crossorigin="anonymous"></script>
<!-- ディスプレイ縦長 -->
<ins class="adsbygoogle"
     style="display:block"
     data-ad-client="ca-pub-4525414114581084"
     data-ad-slot="4544919209"
     data-ad-format="auto"
     data-full-width-responsive="true"></ins>
<script>
     (adsbygoogle = window.adsbygoogle || []).push({});
</script>
</div>

<div class="side_list">
  <div class="side_list_body">
    <ul>
      <li>
        <div class="side_list_image">
          <a rel="nofollow" href="/list.html">New Articles</a><br>
          <a rel="nofollow" href="https://twitter.com/perlzemien">Updated Articles</a>
        </div>
      </li>
    </ul>
  </div>
</div>

        </div>
      </div>
      <div class="footer">
        <div class="perlri_link">
  <a rel="nofollow" href="https://perlclub.net/en">Perl Club</a>
</div>

      </div>
    </div>
  </body>
</html>
